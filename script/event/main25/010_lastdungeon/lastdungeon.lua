dofile("script/include/inc_all.lua")
dofile("script/include/inc_event.lua")
function groundInit()
end
function groundStart()
end
function main25_lastdungeon01_init()
end
function main25_lastdungeon01_start()
  MAP:SetVisible(false)
  MAP:SetBG(SymImg("WALLPAPER_MAIN_CAPTURE_BG01"))
  MAP:SetVisibleBG(true)
  WINDOW:BeginChapter()
  SCREEN_A:FadeOutAll(TimeSec(0), true)
  SCREEN_A:FadeIn(TimeSec(0), true)
  SCREEN_A:FadeInAll(TimeSec(1), false)
  WINDOW:SetWaitMode(TimeSec(2), TimeSec(1))
  WINDOW:Chapter(TimeSec(1.5), TimeSec(1.5), 152606551)
  TASK:Sleep(TimeSec(3))
  SCREEN_A:FadeOutAll(TimeSec(1), true)
  SCREEN_A:FadeOut(TimeSec(0), true)
  WINDOW:EndChapter()
  WINDOW:ForceCloseMessage()
  WINDOW:SetWaitMode(TimeSec(-1), TimeSec(-1))
  SCREEN_A:FadeInAll(TimeSec(0), true)
  MAP:SetVisible(true)
  MAP:SetVisibleBG(false)
end
function main25_lastdungeon01_end()
end
function main25_lastdungeon02_init()
end
function main25_lastdungeon02_start()
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(0.5))
  CAMERA:SetSisaRateVolume(Volume(1))
  CUT:Load(SymCut("m25_010_02"))
  local taskSound00 = function()
    SOUND:FadeInEnv(SymSnd("SE_EVT_STOP_SEIMEINOKI_LP"), TimeSec(0.5), Volume(256))
    TASK:Sleep(TimeSec(190, TIME_TYPE.FRAME))
    SOUND:FadeOutEnv(TimeSec(1.5))
    SOUND:FadeInBgm(SymSnd("SE_EVT_EARTHQUAKE_M_LP"), TimeSec(0.5), Volume(128))
  end
  TASK:Regist(taskSound00)
  CHARA:SetAllCharacterShadowVisible(false)
  CUT:Play()
  CUT:Wait()
  CUT:Destroy()
end
function main25_lastdungeon02_end()
end
function main25_lastdungeon03_init()
end
function main25_lastdungeon03_start()
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(3))
  CAMERA:SetSisaRateVolume(Volume(0.5))
  CAMERA:SetEye(SymCam("CAMERA_00"))
  CAMERA:SetTgt(SymCam("CAMERA_00"))
  CH("HERO"):SetScale(Scale(0, 4, 0))
  CH("PARTNER"):SetScale(Scale(0, 4, 0))
  CH("HERO"):SetShadow(false)
  CH("PARTNER"):SetShadow(false)
  SCREEN_A:FadeIn(TimeSec(0.5), true)
  TASK:Sleep(TimeSec(0.5))
  SOUND:PlaySe(SymSnd("SE_EVT_WARP"))
  CH("HERO"):ChangeScale(Scale(1, 1, 1), TimeSec(5, TIME_TYPE.FRAME))
  CH("PARTNER"):ChangeScale(Scale(1, 1, 1), TimeSec(5, TIME_TYPE.FRAME))
  TASK:Sleep(TimeSec(0.2))
  CH("HERO"):SetShadow(true)
  CH("PARTNER"):SetShadow(true)
  TASK:Sleep(TimeSec(0.5))
  local taskHero00 = function()
    CH("HERO"):DirTo(RotateTarget(45), Speed(350), ROT_TYPE.NEAR)
    CH("HERO"):WaitRotate()
    CH("HERO"):SetManpu("MP_SHOCK_R")
    CH("HERO"):SetMotion(SymMot("EV013_TIRED"), LOOP.ON)
  end
  TASK:Regist(taskHero00)
  TASK:Sleep(TimeSec(0.3))
  local taskPartner00 = function()
    CH("PARTNER"):DirTo(RotateTarget(-45), Speed(350), ROT_TYPE.NEAR)
    CH("PARTNER"):WaitRotate()
    SOUND:PlaySe(SymSnd("SE_EVT_SIGN_HURRY"), Volume(256))
    CH("PARTNER"):SetManpu("MP_FLY_SWEAT")
    CH("PARTNER"):SetMotion(SymMot("EV013_TIRED"), LOOP.ON)
  end
  TASK:Regist(taskPartner00)
  TASK:Sleep(TimeSec(1))
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:DrawFaceF(20, 88, SymAct("PARTNER"), FACE_TYPE.SPECIAL03)
  WINDOW:SwitchTalk({PARTNER_0 = 268674582, PARTNER_1 = 992933333})
  subEveCloseMsg()
  WINDOW:DrawFaceF(324, 88, SymAct("HERO"), FACE_TYPE.SPECIAL03)
  WINDOW:Monologue(573949076)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_02"))
  CAMERA:SetTgt(SymCam("CAMERA_02"))
  TASK:Sleep(TimeSec(0.2))
  local taskLookAt00 = function()
    TASK:Sleep(TimeSec(0.3))
    SOUND:PlaySe(SymSnd("SE_EVT_SIGN_NOTICE_LOW_02"), Volume(256))
    CH("PARTNER"):SetManpu("MP_EXCLAMATION")
    TASK:Sleep(TimeSec(0.1))
    CH("HERO"):SetManpu("MP_EXCLAMATION")
    TASK:Sleep(TimeSec(0.1))
    CH("PARTNER"):SetFacialMotion(FACIAL_MOTION.PAIN)
    TASK:Sleep(TimeSec(0.1))
    CH("HERO"):SetFacialMotion(FACIAL_MOTION.PAIN)
  end
  TASK:Regist(taskLookAt00)
  SOUND:PlaySe(SymSnd("SE_EVT_ARUSEUSU_VOICE"), Volume(256))
  WINDOW:SysMsg(1836339795)
  WINDOW:SysMsg(1953456914)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:DrawFaceF(324, 88, SymAct("HERO"), FACE_TYPE.PAIN)
  WINDOW:Monologue(1598173393)
  subEveCloseMsg()
  WINDOW:DrawFaceF(20, 88, SymAct("PARTNER"), FACE_TYPE.PAIN)
  WINDOW:SwitchTalk({PARTNER_0 = 1180238224, PARTNER_1 = -1044308641})
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_02"))
  CAMERA:SetTgt(SymCam("CAMERA_02"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:SysMsg(-656790498)
  WINDOW:SysMsg(-1112373499)
  WINDOW:CloseMessage()
  SOUND:FadeOutBgm(TimeSec(1.5))
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  SOUND:FadeInEnv(SymSnd("SE_EVT_HERO_SCARF_LIGHT_02_LP"), TimeSec(0.5), Volume(190))
  SOUND:FadeInEnv(SymSnd("SE_EVT_PARTNER_SCARF_LIGHT_02_LP"), TimeSec(0.5), Volume(190))
  EFFECT:Create("effectLuminousScarfLp", SymEff("EV_LUMINOUS_SCARF_LP"))
  EFFECT:SetPosition("effectLuminousScarfLp", CH("HERO"), BODY_POINT.SCARF)
  EFFECT:Play("effectLuminousScarfLp")
  TASK:Sleep(TimeSec(0.2))
  CH("HERO"):SetManpu("MP_EXCLAMATION")
  CH("HERO"):SetFacialMotion(FACIAL_MOTION.SURPRISE)
  CH("HERO"):SetMotion(SymMot("WAIT02"), LOOP.ON, TimeSec(0.4))
  EFFECT:Create("effectLuminousScarfLp02", SymEff("EV_LUMINOUS_SCARF_LP"))
  EFFECT:SetPosition("effectLuminousScarfLp02", CH("PARTNER"), BODY_POINT.SCARF)
  EFFECT:Play("effectLuminousScarfLp02")
  TASK:Sleep(TimeSec(0.2))
  CH("PARTNER"):SetManpu("MP_EXCLAMATION")
  CH("PARTNER"):SetFacialMotion(FACIAL_MOTION.SURPRISE)
  CH("PARTNER"):SetMotion(SymMot("WAIT02"), LOOP.ON, TimeSec(0.4))
  TASK:Sleep(TimeSec(30, TIME_TYPE.FRAME))
  SOUND:FadeOutEnv(TimeSec(1))
  TASK:Sleep(TimeSec(20, TIME_TYPE.FRAME))
  SOUND:PlaySe(SymSnd("SE_EVT_WHITEOUT"))
  SCREEN_A:WhiteOut(TimeSec(0.5), true)
  TASK:Sleep(TimeSec(0.5))
  EFFECT:Remove("effectLuminousScarfLp")
  EFFECT:Remove("effectLuminousScarfLp02")
end
function main25_lastdungeon03_end()
end
function main25_lastdungeon04_init()
end
function main25_lastdungeon04_start()
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(2))
  CAMERA:SetSisaRateVolume(Volume(1))
  CH("HERO"):SetVisibleScarf(true)
  CH("PARTNER"):SetVisibleScarf(true)
  CH("HERO"):SetShadow(false)
  CH("PARTNER"):SetShadow(false)
  CHARA:PreLoadHeroPartnerFinalEvlolution()
  CUT:Load(SymCut("m15_120_06"))
  SOUND:PlayBgm(SymSnd("BGM_EVE_HENSHIN_AFTER"), Volume(256))
  SOUND:FadeInEnv(SymSnd("SE_EVT_FINAL_EV_BACK_LP"), TimeSec(0.5), Volume(128))
  CHARA:SetAllCharacterShadowVisible(false)
  CUT:Play()
  CUT:Wait()
  CUT:Destroy()
end
function main25_lastdungeon04_end()
end
function main25_lastdungeon05_init()
end
function main25_lastdungeon05_start()
  SOUND:PlayBgm(SymSnd("BGM_EVE_HENSHIN_AFTER"), Volume(256))
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(3))
  CAMERA:SetSisaRateVolume(Volume(0.5))
  CAMERA:SetEye(SymCam("CAMERA_00"))
  CAMERA:SetTgt(SymCam("CAMERA_00"))
  TASK:Sleep(TimeSec(1, TIME_TYPE.FRAME))
  EFFECT:Create("effectShinkaEndGlitter01", SymEff("EV_SHINKA_END_GLITTER"))
  EFFECT:Create("effectShinkaEndGlitter02", SymEff("EV_SHINKA_END_GLITTER"))
  EFFECT:SetPosition("effectShinkaEndGlitter01", CH("HERO"), BODY_POINT.HEAD)
  EFFECT:SetPosition("effectShinkaEndGlitter02", CH("PARTNER"), BODY_POINT.HEAD)
  EFFECT:Play("effectShinkaEndGlitter01")
  EFFECT:Play("effectShinkaEndGlitter02")
  SOUND:FadeInEnv(SymSnd("SE_EVT_HERO_LIGHT_LP"), TimeSec(0.2), Volume(256))
  SCREEN_A:WhiteIn(TimeSec(0.5), true)
  SOUND:PlaySe(SymSnd("SE_EVT_SIGN_NOTICE_LOW_01"), Volume(256))
  CH("PARTNER"):SetManpu("MP_EXCLAMATION")
  CH("HERO"):SetManpu("MP_EXCLAMATION")
  CH("PARTNER"):WaitManpu()
  CH("PARTNER"):DirTo(CH("HERO"), Speed(350), ROT_TYPE.NEAR)
  TASK:Sleep(TimeSec(0.2))
  CH("HERO"):DirTo(CH("PARTNER"), Speed(350), ROT_TYPE.NEAR)
  CH("HERO"):WaitRotate()
  WINDOW:DrawFace(324, 88, SymAct("HERO"), FACE_TYPE.SURPRISE)
  WINDOW:Monologue(-1532381628)
  SOUND:FadeOutEnv(TimeSec(1.5))
  subEveCloseMsg()
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.SURPRISE)
  WINDOW:SwitchTalk({PARTNER_0 = -1887115897, PARTNER_1 = -1767910202})
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:SysMsg(-639745535)
  WINDOW:SysMsg(-1060801728)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_02"))
  CAMERA:SetTgt(SymCam("CAMERA_02"))
  CH("PARTNER"):DirTo(RotateTarget(-170), Speed(350), ROT_TYPE.LEFT)
  TASK:Sleep(TimeSec(0.3))
  CH("HERO"):DirTo(RotateTarget(-160), Speed(350), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  SOUND:PlaySe(SymSnd("SE_EVT_SIGN_NOTICE_LOW_02"), Volume(256))
  CH("PARTNER"):SetManpu("MP_NOTICE_L")
  CH("HERO"):WaitRotate()
  CH("HERO"):SetManpu("MP_NOTICE_L")
  WINDOW:SysMsg(-337108861)
  WINDOW:CloseMessage()
  TASK:Regist(subEveMoveDir, {
    CH("PARTNER"),
    SymPos("P00_PARTNER"),
    Speed(1.5),
    RotateTarget(180)
  })
  TASK:Sleep(TimeSec(0.3))
  TASK:Regist(subEveMoveDir, {
    CH("HERO"),
    SymPos("P00_HERO"),
    Speed(1.5),
    RotateTarget(180)
  })
  TASK:Sleep(TimeSec(0.8))
  SCREEN_A:FadeOut(TimeSec(0.3), true)
end
function main25_lastdungeon05_end()
end
function main25_lastdungeon06_init()
end
function main25_lastdungeon06_start()
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(3))
  CAMERA:SetSisaRateVolume(Volume(0.5))
  SOUND:PlayBgm(SymSnd("BGM_EVE_HENSHIN_AFTER"), Volume(256))
  CAMERA:SetEye(SymCam("CAMERA_00"))
  CAMERA:SetTgt(SymCam("CAMERA_00"))
  CH("HERO"):WalkTo(SymPos("P00_HERO"), Speed(1.5))
  CH("PARTNER"):WalkTo(SymPos("P00_PARTNER"), Speed(1.5))
  CAMERA:MoveFollow(SymCam("CAMERA_01"), Speed(0.5, ACCEL_TYPE.NONE, DECEL_TYPE.HIGH))
  SCREEN_A:FadeIn(TimeSec(0.3), true)
  WINDOW:SysMsg(-218951230)
  WINDOW:SysMsg(1969949965)
  WINDOW:SysMsg(1819294796)
  WINDOW:SysMsg(-1358485269)
  WINDOW:CloseMessage()
  SCREEN_A:FadeOut(TimeSec(0.5), true)
end
function main25_lastdungeon06_end()
end
function main25_lastdungeon07_init()
end
function main25_lastdungeon07_start()
  SOUND:PlayBgm(SymSnd("BGM_EVE_HENSHIN_AFTER"), Volume(256))
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(3))
  CAMERA:SetSisaRateVolume(Volume(0.5))
  CAMERA:SetEye(SymCam("CAMERA_00"))
  CAMERA:SetTgt(SymCam("CAMERA_00"))
  SCREEN_A:FadeIn(TimeSec(0.5), true)
  CH("PARTNER"):DirTo(RotateTarget(0), Speed(350), ROT_TYPE.NEAR)
  TASK:Sleep(TimeSec(0.2))
  CH("HERO"):DirTo(RotateTarget(0), Speed(350), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = -1239672406, PARTNER_1 = -1657714071})
  WINDOW:SwitchTalk({PARTNER_0 = -2077590744, PARTNER_1 = -882119185})
  WINDOW:SwitchTalk({PARTNER_0 = -764355410, PARTNER_1 = -111308947})
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:SysMsg(-532234708)
  WINDOW:SysMsg(1742643939)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_02"))
  CAMERA:SetTgt(SymCam("CAMERA_02"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:SysMsg(2126877602)
  WINDOW:SysMsg(398151566)
  WINDOW:CloseMessage()
  CH("PARTNER"):DirTo(RotateTarget(45), Speed(200), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = 245399247, PARTNER_1 = 630009100})
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_03"))
  CAMERA:SetTgt(SymCam("CAMERA_03"))
  TASK:Sleep(TimeSec(0.2))
  local taskLookAt00 = function()
    TASK:Sleep(TimeSec(0.3))
    CH("HERO"):DirTo(SymPos("P_EXIT"), Speed(350), ROT_TYPE.NEAR)
    TASK:Sleep(TimeSec(0.2))
    CH("PARTNER"):DirTo(SymPos("P_EXIT"), Speed(350), ROT_TYPE.NEAR)
    SOUND:PlaySe(SymSnd("SE_EVT_SIGN_NOTICE_LOW_02"), Volume(256))
    CH("HERO"):SetManpu("MP_NOTICE_R")
    TASK:Sleep(TimeSec(0.2))
    CH("PARTNER"):SetManpu("MP_NOTICE_R")
  end
  TASK:Regist(taskLookAt00)
  WINDOW:SysMsg(1016470605)
  WINDOW:SysMsg(1943505546)
  WINDOW:SysMsg(1791802315)
  WINDOW:CloseMessage()
  TASK:WaitTask()
  CAMERA:SetEye(SymCam("CAMERA_04"))
  CAMERA:SetTgt(SymCam("CAMERA_04"))
  CH("PARTNER"):DirTo(RotateTarget(30), Speed(350), ROT_TYPE.NEAR)
  TASK:Sleep(TimeSec(0.2))
  CH("HERO"):DirTo(RotateTarget(0), Speed(350), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  CH("PARTNER"):SetManpu("MP_SPREE_LP")
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = 1105324040, PARTNER_1 = 1492834633})
  subEveCloseMsg()
  CH("PARTNER"):ResetManpu()
  WINDOW:SysMsg(-547175034)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_01"))
  CAMERA:SetTgt(SymCam("CAMERA_01"))
  TASK:Sleep(TimeSec(0.2))
  WINDOW:SysMsg(-965086009)
  WINDOW:SysMsg(-1972603081)
  WINDOW:SysMsg(-1820899722)
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_05"))
  CAMERA:SetTgt(SymCam("CAMERA_05"))
  TASK:Sleep(TimeSec(0.2))
  TASK:Regist(subEveDoubleJump, {
    CH("PARTNER")
  })
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = -1202055755, PARTNER_1 = -1589566220})
  WINDOW:SwitchTalk({PARTNER_0 = -301944269, PARTNER_1 = -149191822})
  WINDOW:CloseMessage()
  CH("PARTNER"):SetManpu("MP_LAUGH_LP")
  CAMERA:SetEye(SymCam("CAMERA_06"))
  CAMERA:SetTgt(SymCam("CAMERA_06"))
  CH("HERO"):DirTo(CH("PARTNER"), Speed(350), ROT_TYPE.NEAR)
  CH("HERO"):WaitRotate()
  WINDOW:DrawFace(324, 88, SymAct("HERO"), FACE_TYPE.NORMAL)
  WINDOW:Monologue(-600387407)
  WINDOW:Monologue(-986848784)
  WINDOW:CloseMessage()
  CH("HERO"):SetVisible(false)
  CAMERA:SetEye(SymCam("CAMERA_05_5"))
  CAMERA:SetTgt(SymCam("CAMERA_05_5"))
  TASK:Sleep(TimeSec(0.2))
  TASK:Regist(subEveDoubleJump, {
    CH("PARTNER")
  })
  WINDOW:Monologue(1119223103)
  WINDOW:Monologue(1538182270)
  WINDOW:CloseMessage()
  CH("HERO"):SetVisible(true)
  CAMERA:SetEye(SymCam("CAMERA_07"))
  CAMERA:SetTgt(SymCam("CAMERA_07"))
  CH("PARTNER"):ResetManpu()
  CH("PARTNER"):DirTo(CH("HERO"), Speed(350), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = 852496466, PARTNER_1 = 734732563})
  WINDOW:CloseMessage()
  CAMERA:SetEye(SymCam("CAMERA_08"))
  CAMERA:SetTgt(SymCam("CAMERA_08"))
  CAMERA:SetFovy(SymCam("CAMERA_08"))
  CAMERA:SetSisaAzimuthDifferenceVolume(Volume(0.5))
  CAMERA:MoveFollow2(SymCam("CAMERA_08_5"), Speed(4, ACCEL_TYPE.NONE, DECEL_TYPE.HIGH))
  CH("PARTNER"):DirTo(SymPos("P_EXIT"), Speed(350), ROT_TYPE.NEAR)
  CH("PARTNER"):WaitRotate()
  CH("HERO"):DirTo(SymPos("P_EXIT"), Speed(350), ROT_TYPE.NEAR)
  CAMERA:WaitMove()
  WINDOW:DrawFace(20, 88, SymAct("PARTNER"), FACE_TYPE.NORMAL)
  WINDOW:SwitchTalk({PARTNER_0 = 15102672, PARTNER_1 = 436028305})
  WINDOW:CloseMessage()
  SOUND:FadeOutBgm(TimeSec(1.5))
  subEveNod(CH("HERO"))
  SCREEN_A:FadeOut(TimeSec(1), true)
  TASK:Sleep(TimeSec(2))
end
function main25_lastdungeon07_end()
end
function groundEnd()
end
