function OpenExampleShopMenu()
  local ExampleShopSys = {}
  function ExampleShopSys:IsMoneyOk_forSample(money)
    return ShopSys:DummyJudeAsk("\227\129\138\233\135\145\232\182\179\227\130\138\227\129\166\227\130\139\239\188\159", true)
  end
  function dispNigiriSelectMenu(selectAct, cancelAct)
    if ShopSys:DummyJudeAsk("\227\130\173\227\131\163\227\131\179\227\130\187\227\131\171\227\129\151\227\129\159\239\188\159", true) then
      cancelAct()
    elseif ShopSys:DummyJudeAsk("\227\129\153\227\129\148\227\129\132\227\130\183\227\131\163\227\131\170\227\129\174\227\130\185\227\130\183\227\130\146\233\129\184\227\130\147\227\129\160\239\188\159", true) then
      selectAct("\227\129\153\227\129\148\227\129\132\227\130\183\227\131\163\227\131\170\227\129\174\227\130\185\227\130\183")
    elseif ShopSys:DummyJudeAsk("\227\129\153\227\129\148\227\129\132\227\131\141\227\130\191\227\129\174\227\130\185\227\130\183\227\130\146\233\129\184\227\130\147\227\129\160\239\188\159", true) then
      selectAct("\227\129\153\227\129\148\227\129\132\227\131\141\227\130\191\227\129\174\227\130\185\227\130\183")
    elseif ShopSys:DummyJudeAsk("\227\129\153\227\129\148\227\129\132\227\131\142\227\131\170\227\129\174\227\130\185\227\130\183\227\130\146\233\129\184\227\130\147\227\129\160\239\188\159", true) then
      selectAct("\227\129\153\227\129\148\227\129\132\227\131\142\227\131\170\227\129\174\227\130\185\227\130\183")
    elseif ShopSys:DummyJudeAsk("\227\129\153\227\129\148\227\129\132\227\130\181\227\131\147\227\129\174\227\130\185\227\130\183\227\130\146\233\129\184\227\130\147\227\129\160\239\188\159", true) then
      selectAct("\227\129\153\227\129\148\227\129\132\227\130\181\227\131\147\227\129\174\227\130\185\227\130\183")
    else
      cancelAct()
    end
  end
  ShopSys:SetOwner("KAKUREON", "\227\131\158\227\130\185\227\130\191\227\131\188")
  FlowSys:Start()
  ShopSys:Start()
  function FlowSys.Proc.exampleShopMenuOpen()
    ShopSys:SysMsgAskFlow("\230\156\128\229\136\157\227\129\174\232\170\172\230\152\142\227\130\146\232\170\173\227\129\191\227\129\190\227\129\153\227\129\139\239\188\159", nil, nil, {text = "\227\129\175\227\129\132", next = "step1"}, {text = "\227\129\132\227\129\132\227\129\136", next = "askNigiri"})
    FlowSys:Next("step1")
  end
  function FlowSys.Proc.step1()
    ShopSys:SysMsg("\227\129\190\227\129\154\227\129\175Next\227\129\174\228\189\191\227\129\132\230\150\185\227\129\139\227\130\137\227\129\155\227\129\164\227\130\129\227\129\132\227\129\151\227\129\190\227\129\153")
    ShopSys:SysMsg("FlowSys\227\129\171\227\129\175\227\128\128Next()\227\129\168Call()\227\128\128\227\129\168\227\129\132\227\129\134[R]\239\188\146\227\129\164\227\129\174\233\129\183\231\167\187\230\150\185\230\179\149\227\129\140\227\129\130\227\130\138\227\129\190\227\129\153 ")
    ShopSys:SysMsg("\227\129\190\227\129\154\227\129\175\227\128\128Next()\227\128\128\227\129\139\227\130\137\232\170\172\230\152\142\227\129\151\227\129\190\227\129\153 ")
    ShopSys:SysMsg("\232\169\166\227\129\151\227\129\171\227\128\128flowSample_Next\227\128\128\227\129\168\227\129\132\227\129\134[R]\227\131\149\227\131\173\227\131\188\227\129\171\233\129\183\231\167\187\227\129\151\227\129\190\227\129\151\227\130\135\227\129\134")
    ShopSys:SysMsg("\233\129\183\231\167\187\227\129\153\227\130\139\227\129\171\227\129\175\227\129\147\227\129\174\227\130\136\227\129\134\227\129\171\232\168\152\232\191\176\227\129\151\227\129\190\227\129\153[R][K][STS]FlowSys:Next(\"flowSample_Next\")[STE]\227\128\128")
    FlowSys:Next("flowSample_Next")
  end
  function FlowSys.Proc.exampleShopMenuFinish()
    FlowSys:Return()
  end
  function FlowSys.Proc.flowSample_Next()
    ShopSys:SysMsg("\227\129\147\227\129\147\227\129\175 flowSample_Next \227\129\167\227\129\153")
    ShopSys:SysMsg("\227\129\147\227\130\140\227\129\167\233\129\183\231\167\187\227\129\151\227\129\190\227\129\151\227\129\159[C]\227\129\164\227\129\142\227\129\175\227\128\128flowSample_Call\227\128\128\227\129\168\227\129\132\227\129\134[R]\227\131\149\227\131\173\227\131\188\227\129\171Call\227\130\146\227\129\164\227\129\139\227\129\163\227\129\166\233\129\183\231\167\187\227\129\151\227\129\190\227\129\151\227\130\135\227\129\134")
    ShopSys:SysMsg(" [STS]FlowSys:Call(\"flowSample_Call\")[STE] ")
    FlowSys:Call("flowSample_Call")
    ShopSys:SysMsg("Return()\227\129\167\230\136\187\227\129\163\227\129\166\227\129\141\227\129\190\227\129\151\227\129\159[R]\227\129\147\227\129\147\227\129\175\227\128\128flowSample_Next\227\128\128\227\129\174\228\184\173\227\129\167\227\129\153")
    ShopSys:SysMsg("Next()\227\129\168Return()\227\129\171\227\129\164\227\129\132\227\129\166\227\129\175[R]\227\129\147\227\130\140\227\129\167\227\129\178\227\129\168\227\129\190\227\129\154\232\170\172\230\152\142\231\181\130\228\186\134\227\129\167\227\129\153")
    ShopSys:SysMsgAskFlow("\227\130\130\227\129\134\227\129\132\227\129\161\227\129\169\232\170\172\230\152\142\227\129\151\227\129\190\227\129\153\227\129\139\239\188\159", nil, nil, {
      text = "\227\129\175\227\129\132",
      next = "exampleShopMenuOpen"
    }, {text = "\227\129\132\227\129\132\227\129\136", next = "step2"})
  end
  function FlowSys.Proc.flowSample_Call()
    ShopSys:SysMsg("\227\129\147\227\129\147\227\129\175 flowSample_Call \227\129\167\227\129\153")
    ShopSys:SysMsg("\227\129\147\227\130\140\227\129\167\233\129\183\231\167\187\227\129\151\227\129\190\227\129\151\227\129\159[R][K]\227\129\164\227\129\142\227\129\175\227\128\128Next\227\129\168Call\227\129\174\233\129\149\227\129\132\227\130\146\232\166\139\227\129\166\227\129\132\227\129\141\227\129\190\227\129\151\227\130\135\227\129\134")
    ShopSys:SysMsg("\227\129\190\227\129\154Next\227\129\167\233\129\183\231\167\187\227\129\153\227\130\139\229\160\180\229\144\136\227\129\175[R]\233\150\162\230\149\176\227\129\140\231\181\130\227\130\143\227\129\163\227\129\159\229\190\140\227\129\171\233\129\183\231\167\187\227\129\140\231\153\186\231\148\159\227\129\151\227\129\190\227\129\153")
    ShopSys:SysMsg("\227\129\164\227\129\142\227\129\171Call\227\129\167\233\129\183\231\167\187\227\129\153\227\130\139\229\160\180\229\144\136\227\129\175[R]Call\227\129\168\230\155\184\227\129\132\227\129\159\229\160\180\230\137\128\227\129\167\233\129\183\231\167\187\227\129\140\231\153\186\231\148\159\227\129\151\227\129\190\227\129\153")
    ShopSys:SysMsg("\227\129\190\227\129\159Call\227\129\174\229\160\180\229\144\136\227\129\175\233\129\183\231\167\187\227\129\151\227\129\159\229\190\140\227\129\171[R]\229\191\133\227\129\154Return()\227\129\168\232\168\152\232\191\176\227\129\151\227\129\166\230\136\187\227\130\139\229\191\133\232\166\129\227\129\140\227\129\130\227\130\138\227\129\190\227\129\153")
    ShopSys:SysMsg("\227\129\161\227\130\135\227\129\134\227\129\169\227\128\129\228\187\138\227\129\175Call\227\129\167\233\129\183\231\167\187\227\129\151\227\129\159\229\190\140\227\129\170\227\129\174\227\129\167[R]Return()\227\130\146\227\129\151\227\129\166\227\129\191\227\129\190\227\129\151\227\130\135\227\129\134")
    FlowSys:Return()
    ShopSys:SysMsg(" [STS]FlowSys:Return()[STE] ")
    ShopSys:SysMsg("\227\129\161\227\129\170\227\129\191\227\129\171Return()\227\129\175Next()\227\129\168\229\144\140\230\167\152\227\129\167[R]\233\150\162\230\149\176\227\129\140\231\181\130\227\130\143\227\129\163\227\129\159\229\190\140\227\129\171\233\129\183\231\167\187\227\129\140\231\153\186\231\148\159\227\129\151\227\129\190\227\129\153")
  end
  function FlowSys.Proc.step2()
    ShopSys:SysMsg("STEP2[R]\227\128\128ReturnNext()\227\128\128\227\129\174\228\189\191\227\129\132\230\150\185")
    ShopSys:SysMsg("\227\129\178\227\129\168\227\129\190\227\129\154Call\227\130\146\227\129\164\227\129\139\227\129\163\227\129\166[R]flowSample_ReturnNext\227\128\128\227\129\171\233\129\183\231\167\187\227\129\151\227\129\190\227\129\153")
    ShopSys:SysMsg(" [STS]FlowSys:Next(\"flowSample_ReturnNext\")[STE] ")
    FlowSys:Call("flowSample_ReturnNext")
    ShopSys:SysMsg("flowSample_ReturnNext\227\128\128\227\129\139\227\130\137\230\136\187\227\129\163\227\129\166\227\129\141\227\129\190\227\129\151\227\129\159")
    ShopSys:SysMsg("\227\129\147\227\129\174\230\153\130\231\130\185\227\129\167\227\128\128flowSample_ReturnNext2 \227\129\184\227\129\174[R]Next()\227\129\140\229\145\188\227\129\176\227\130\140\227\129\166\227\129\132\227\129\190\227\129\153")
  end
  function FlowSys.Proc.flowSample_ReturnNext()
    ShopSys:SysMsg("\227\129\147\227\129\147\227\129\175 flowSample_ReturnNext \227\129\167\227\129\153")
    ShopSys:SysMsg("\227\129\147\227\130\140\227\129\167\233\129\183\231\167\187\227\129\151\227\129\190\227\129\151\227\129\159[R][K]\227\129\149\227\129\166\227\128\128ReturnNext()\227\128\128\227\129\174\232\170\172\230\152\142\227\130\146\227\129\175\227\129\152\227\130\129\227\129\190\227\129\151\227\130\135\227\129\134")
    ShopSys:SysMsg("ReturnNext()\227\128\128\227\129\168\227\129\175\227\130\186\227\131\144\227\131\170[R]Return()\227\129\151\227\129\159\229\190\140\227\129\171Next()\227\130\146\229\145\188\227\129\179\227\129\190\227\129\153")
    ShopSys:SysMsg("\227\129\159\227\129\160\229\141\152\227\129\171\227\129\157\227\130\140\227\129\160\227\129\145\227\129\174\230\169\159\232\131\189\227\129\174Return()\227\129\167\227\129\153")
    ShopSys:SysMsg("\230\151\169\233\128\159\227\128\129\228\189\191\227\129\163\227\129\166\227\129\191\227\129\190\227\129\151\227\130\135\227\129\134")
    ShopSys:SysMsg(" [STS]FlowSys:ReturnNext(\"flowSample_ReturnNext2\")[STE] ")
    FlowSys:ReturnNext("flowSample_ReturnNext2")
  end
  function FlowSys.Proc.flowSample_ReturnNext2()
    ShopSys:SysMsg("\227\129\147\227\129\147\227\129\175 flowSample_ReturnNext2 \227\129\167\227\129\153")
    ShopSys:SysMsg("\227\129\175\227\129\132\227\128\130ReturnNext\227\129\174\232\170\172\230\152\142\227\129\175[R]\227\129\147\227\130\140\227\129\167\227\129\138\227\129\151\227\129\190\226\128\166[W:30]\227\129\132\227\129\167\227\129\175\227\129\130\227\130\138\227\129\190\227\129\155\227\130\147\227\128\130")
    ShopSys:SysMsg("\227\129\159\227\129\182\227\130\147\228\189\149\227\129\140\228\190\191\229\136\169\227\129\170\227\129\174\227\129\139\239\188\159[R]\227\129\147\227\130\140\227\129\160\227\129\145\227\129\160\227\129\168\227\130\164\227\131\158\227\130\164\227\131\129\227\129\160\227\129\168\230\128\157\227\129\132\227\129\190\227\129\153")
    ShopSys:SysMsg("FlowSys:CheckNext()[K][R]\227\129\147\227\130\140\227\129\168\227\129\130\227\130\143\227\129\155\227\129\166\228\189\191\227\129\134\227\129\168\228\190\191\229\136\169\227\129\171\227\129\170\227\130\138\227\129\190\227\129\153")
    ShopSys:SysMsg("CheckNext()\227\129\175\227\128\129[R]Next()\227\129\140\232\168\173\229\174\154\227\129\149\227\130\140\227\129\166\227\129\132\227\130\139\227\129\170\227\130\137\227\129\176true\227\130\146[C]\227\129\149\227\130\140\227\129\166\227\129\132\227\129\170\227\129\132\227\129\170\227\130\137\227\129\176false\227\130\146\232\191\148\227\129\151\227\129\190\227\129\153")
    ShopSys:SysMsg("\227\129\147\227\130\140\227\129\171\227\130\136\227\129\163\227\129\166\227\131\149\227\131\173\227\131\188\227\130\146\228\184\173\230\150\173\227\129\153\227\130\139\227\130\136\227\129\134\227\129\170[R]\228\187\149\231\181\132\227\129\191\227\130\146\228\189\156\227\130\139\227\129\147\227\129\168\227\129\140\227\129\167\227\129\141\227\129\190\227\129\153\227\128\130")
    ShopSys:SysMsg("\232\169\179\227\129\151\227\129\143\227\129\175\227\129\147\227\129\174\229\190\140\227\129\174\229\174\159\233\154\155\227\129\174\227\129\138\229\186\151\227\129\174\227\130\181\227\131\179\227\131\151\227\131\171\227\129\171\227\129\166")
    ShopSys:SysMsg("ReturnNext()\227\129\171\227\129\164\227\129\132\227\129\166\227\129\175[R]\227\129\147\227\130\140\227\129\167\227\129\178\227\129\168\227\129\190\227\129\154\232\170\172\230\152\142\231\181\130\228\186\134\227\129\167\227\129\153")
    ShopSys:SysMsgAskFlow("\227\130\130\227\129\134\227\129\132\227\129\161\227\129\169\232\170\172\230\152\142\227\129\151\227\129\190\227\129\153\227\129\139\239\188\159", nil, nil, {text = "\227\129\175\227\129\132", next = "step2"}, {text = "\227\129\132\227\129\132\227\129\136", next = "step3"})
  end
  function FlowSys.Proc.step3()
    ShopSys:SysMsg("STEP3[R]\227\128\128\227\129\152\227\129\163\227\129\149\227\129\132\227\129\174\227\129\138\229\186\151\227\129\174\227\130\181\227\131\179\227\131\151\227\131\171")
    ShopSys:SysMsg("\227\129\147\227\129\147\227\129\139\227\130\137\227\129\175\229\174\159\233\154\155\227\129\174\227\129\138\229\186\151\227\129\171\232\191\145\227\129\132[R]\227\130\181\227\131\179\227\131\151\227\131\171\231\148\168\227\129\138\229\186\151\227\129\174\227\131\149\227\131\173\227\131\188\227\130\146\232\168\152\232\191\176\227\129\151\227\129\166\227\130\134\227\129\141\227\129\190\227\129\153")
    ShopSys:SysMsg("\232\170\172\230\152\142\227\129\175\227\129\147\227\129\147\227\129\167\227\129\178\227\129\168\227\129\190\227\129\154\227\129\138\227\129\151\227\129\190\227\129\132\227\129\167\227\129\153\227\128\130")
    ShopSys:SysMsg("\227\129\147\227\129\174\229\190\140\227\129\175\227\130\189\227\131\188\227\130\185\227\130\146\231\155\180\230\142\165\227\129\138\227\129\163\227\129\166\227\129\143\227\129\160\227\129\149\227\129\132")
    ShopSys:SysMsg("\227\129\157\227\130\140\227\129\167\227\129\175")
    WINDOW:CloseMessage()
    FlowSys:Next("askNigiri")
  end
  function FlowSys.Proc.askNigiri()
    ShopSys:Talk("\227\129\184\227\129\132\227\130\137\227\129\163\227\129\151\227\130\131\227\129\132\239\188\129\227\129\170\227\129\171\227\131\139\227\130\174\227\131\170\227\130\132\227\129\151\227\130\135\227\129\134\227\129\139\239\188\159")
    FlowSys:Next("selectNigiri")
  end
  function FlowSys.Proc.askNigiriOhter()
    ShopSys:Talk("\227\129\138\230\172\161\227\129\175\227\128\129\227\129\170\227\129\171\227\131\139\227\130\174\227\131\170\227\130\132\227\129\151\227\130\135\227\129\134\227\129\139\239\188\159")
    FlowSys:Next("selectNigiri")
  end
  function FlowSys.Proc.selectNigiri()
    dispNigiriSelectMenu(function(selectedName)
      FlowSys:Next("nigiriSelected", selectedName)
    end, function(selectedName)
      FlowSys:Next("nigiriCancel")
    end)
  end
  function FlowSys.Proc.nigiriSelected(selectedSuShiName)
    MENU:SetTag_String(0, selectedSuShiName)
    ShopSys:Talk("\227\131\152\227\130\164\227\129\138\227\129\190\227\129\161\239\188\129[R][string:0]\227\128\128\227\129\167\227\129\163\227\129\149\227\129\129")
    FlowSys:Next("askNigiriOhter")
  end
  function FlowSys.Proc.nigiriCancel()
    ShopSys:Talk("\227\129\184\227\129\132\227\128\129\227\129\190\227\129\132\227\129\169\227\129\130\227\130\138\227\129\131\239\188\129")
    ShopSys:Talk("\227\129\138\228\188\154\232\168\136\227\129\175100\228\184\135\227\131\157\227\130\177\227\129\167\227\129\149\227\129\129\239\188\129")
    if FlowSys:Call("checkMoney") then
      return
    end
    ShopSys:Talk("\227\129\190\227\129\159\227\129\174\227\129\138\227\129\147\227\129\151\227\130\146\227\131\188\239\188\129")
    WINDOW:CloseMessage()
    FlowSys:Next("exampleShopMenuFinish")
  end
  function FlowSys.Proc.checkMoney()
    if ExampleShopSys:IsMoneyOk_forSample() == false then
      ShopSys:Talk("\227\129\138\233\135\145\227\129\140\232\182\179\227\130\138\227\129\170\227\129\132\239\188\159\227\128\128\226\128\166\227\129\190\227\129\159\227\129\190\227\129\159\229\190\161\229\134\151\232\171\135\227\130\146")
      FlowSys:ReturnNext("askNigiriOhter")
      return
    end
    FlowSys:Return()
  end
  FlowSys:Call("exampleShopMenuOpen")
  ShopSys:SysMsg("\227\130\181\227\131\179\227\131\151\227\131\171\227\129\138\229\186\151\227\129\138\227\129\151\227\129\190\227\129\132")
  WINDOW:CloseMessage()
  FlowSys:Finish()
  ShopSys:Finish()
end
